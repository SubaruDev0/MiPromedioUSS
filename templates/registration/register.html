{% extends 'calculadora/base.html' %}

{% block content %}
<div class="container" style="margin-top: 40px; max-width: 400px; padding-bottom: 100px;">
    <div class="calculator-card">
        <h2 class="text-center" style="color: var(--primary-color); margin-bottom: 30px;">Crear Cuenta</h2>

        <form method="post">
            {% csrf_token %}
            
            {% if form.non_field_errors %}
            <div style="background-color: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin-bottom: 20px;">
                {{ form.non_field_errors }}
            </div>
            {% endif %}

            {% for field in form %}
            <div class="input-group" style="margin-bottom: 20px;">
                <label style="margin-bottom: 8px; display: block; font-weight: 600;">{{ field.label }}</label>
                
                {% if 'password' in field.name %}
                <div style="position: relative;">
                    {{ field }}
                    <button type="button" class="toggle-password" 
                            onclick="togglePassword('{{ field.auto_id }}')"
                            style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); 
                                   background: none; border: none; cursor: pointer; color: var(--text-light);">
                        üëÅÔ∏è
                    </button>
                </div>
                {% else %}
                {{ field }}
                {% endif %}
                
                {% if field.help_text %}
                <div style="color: var(--text-light); font-size: 0.75rem; margin-top: 4px;">
                    {{ field.help_text|safe }}
                </div>
                {% endif %}
                {% if field.errors %}
                <div style="color: var(--danger-color); font-size: 0.8rem; margin-top: 4px;">
                    {% for error in field.errors %}
                    <div>{{ error }}</div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% endfor %}

            <button type="submit" class="btn-primary"
                style="width: 100%; border-radius: var(--radius-sm); font-size: 1rem; margin-top: 10px;">Registrarse</button>
        </form>

        <div class="text-center" style="margin-top: 20px; font-size: 0.9rem;">
            ¬øYa tienes cuenta? <a href="{% url 'login' %}"
                style="color: var(--accent-color); text-decoration: none; font-weight: 600;">Inicia Sesi√≥n</a>
        </div>
    </div>
</div>

<style>
    /* Override Django form inputs to match our style */
    input[type="text"],
    input[type="password"],
    input[type="email"],
    select {
        padding: 10px;
        border: 1px solid var(--border-color);
        border-radius: var(--radius-sm);
        background: var(--bg-color);
        color: var(--text-main);
        font-size: 1rem;
        width: 100%;
        box-sizing: border-box;
    }

    input:focus,
    select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(0, 45, 114, 0.1);
    }
</style>

<script>
function togglePassword(fieldId) {
    const field = document.getElementById(fieldId);
    const button = event.target;
    
    if (field.type === 'password') {
        field.type = 'text';
        button.textContent = 'üôà';
    } else {
        field.type = 'password';
        button.textContent = 'üëÅÔ∏è';
    }
}
</script>
{% endblock %}